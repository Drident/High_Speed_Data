Version 4
SHEET 1 1520 688
WIRE -176 -16 -272 -16
WIRE -112 -16 -176 -16
WIRE -16 -16 -112 -16
WIRE 64 -16 -16 -16
WIRE 240 -16 64 -16
WIRE 368 -16 320 -16
WIRE 432 -16 368 -16
WIRE 608 -16 512 -16
WIRE 64 0 64 -16
WIRE -272 48 -272 -16
WIRE -16 96 -16 64
WIRE 176 96 -16 96
WIRE 64 112 64 80
WIRE 64 112 32 112
WIRE 176 144 176 96
WIRE 240 144 176 144
WIRE 368 144 320 144
WIRE 544 144 368 144
WIRE 752 144 624 144
WIRE 816 144 752 144
WIRE 192 240 144 240
WIRE 320 240 256 240
WIRE -208 272 -208 256
WIRE -208 288 -208 272
WIRE 144 320 144 240
WIRE 192 320 144 320
WIRE 320 320 320 240
WIRE 320 320 272 320
WIRE 352 320 320 320
WIRE -368 336 -496 336
WIRE 64 336 64 112
WIRE 144 336 144 320
WIRE 144 336 64 336
WIRE -208 352 -288 352
WIRE -144 352 -208 352
WIRE -16 352 -16 192
WIRE -16 352 -144 352
WIRE -368 368 -768 368
WIRE -144 368 -144 352
WIRE -768 384 -768 368
WIRE 352 400 352 320
WIRE 352 400 304 400
WIRE 416 400 352 400
WIRE 144 416 144 336
WIRE 240 416 144 416
WIRE 384 432 304 432
WIRE 416 432 384 432
WIRE 384 464 384 432
FLAG -272 128 0
FLAG -144 448 0
FLAG 608 -16 0
FLAG 816 224 0
FLAG 368 -16 Vx
FLAG 368 144 Vy
FLAG 272 384 Vdd
FLAG 496 432 Vx
FLAG 416 400 Vy
FLAG 752 144 Vctrl
FLAG -368 384 0
FLAG -496 336 0
FLAG -768 464 0
FLAG -208 176 0
FLAG -208 272 Vout
FLAG -112 -16 Vdd
FLAG -176 64 Vss
FLAG 272 448 0
FLAG 384 544 0
SYMBOL pmos 32 192 R180
SYMATTR InstName M1
SYMATTR Value BSS84
SYMBOL voltage -272 32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL res 48 -16 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -160 352 R0
SYMATTR InstName R2
SYMATTR Value 500
SYMBOL res -32 -32 R0
SYMATTR InstName R3
SYMATTR Value 50
SYMBOL res 336 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {10k*(1-t4)}
SYMBOL res 528 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -66 55 VTop 2
SYMATTR InstName R6
SYMATTR Value {33k*(1-t6)}
SYMBOL res 336 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {10k*(1+t4)}
SYMBOL res 640 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {31.6k*(1+t6)}
SYMBOL voltage -176 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 8
SYMBOL voltage 816 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 3.3 0 1 1 1 3)
SYMBOL OpAmps\\UniversalOpamp2 272 416 M0
SYMATTR InstName U1
SYMBOL res 288 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {RF}
SYMBOL res 400 560 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value {RF}
SYMBOL cap 256 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL SpecialFunctions\\ota -336 288 R0
WINDOW 3 -188 147 Left 2
SYMATTR InstName A1
SYMATTR Value G=2e-3 Vhigh=24 Iout=10m
SYMBOL voltage -768 368 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 0
SYMATTR Value2 AC 1
SYMBOL cap -224 288 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL res -224 160 R0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL voltage 400 432 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 0m
TEXT -120 584 Left 2 !.tran 1000m
TEXT 536 440 Left 2 !.param RF=1Meg
TEXT 376 672 Left 2 !;ac dec 1000 0.01 100k
TEXT 880 -40 Left 2 ;.step param t2 -0.001 0.001 0.002
TEXT 880 -64 Left 2 ;.step param t1 -0.001 0.001 0.002
TEXT 880 -16 Left 2 ;.step param t3 -0.001 0.001 0.002
TEXT 880 8 Left 2 !.step param t4 -0.001 0.001 0.001
TEXT 880 32 Left 2 !.step param t5 -0.001 0.001 0.001
TEXT 880 56 Left 2 !.step param t6 -0.001 0.001 0.001
TEXT 896 -136 Left 2 ;.meas TRAN err1 AVG {V(vctrl)*20mA/3.3V+Id(M1)}
TEXT 936 144 Left 2 !.params t4=0 t5=0 t6=0
TEXT 136 488 Left 2 ;TLV9304IDR
